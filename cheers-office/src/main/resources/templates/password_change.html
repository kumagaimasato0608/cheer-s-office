<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>
    
>パスワード・メールアドレス変更</title>

    <style>
        /* (以前のCSSスタイルは省略 - 画面サイズ調整済みのものを使用) */
        body { 
            font-family: 'Arial', sans-serif;
            background-color: #e6f0ff; /* 全体の薄い青背景 */
            display: flex; 
            justify-content: center; 
            align-items: flex-start;
            min-height: calc(100vh - 60px); 
            padding-top: 80px; 
            margin: 0;
            box-sizing: border-box;
        }
        .auth-container { 
            background-color: #ffffff; 
            padding: 30px 40px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); 
            width: 100%; 
            max-width: 800px; /* マイページに合わせたサイズ */
            text-align: center;
            margin: 20px;
        }
        h1 { color: #333; text-align: center; margin-bottom: 30px; font-size: 2.2em; border-bottom: 2px solid #007bff; padding-bottom: 10px; }
        h2 { color:#007bff; font-size:1.5em; text-align:left; border-bottom: 1px solid #eee; padding-bottom: 5px; margin-top: 30px; margin-bottom: 20px; }
        h2.password-section-title { color: #dc3545; }
        .form-group { margin-bottom: 20px; text-align: left; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #555; font-size: 1.1em; }
        input[type="text"], input[type="password"], input[type="email"] { 
            width: calc(100% - 20px); 
            padding: 12px; 
            border: 1px solid rgb(0, 128, 255); 
            border-radius: 6px; 
            box-sizing: border-box; 
            font-size: 1em;
        }
        input[disabled] { background-color: #e9ecef; color: #6c757d; cursor: not-allowed; }
        button { 
            width: 100%; padding: 15px; border: none; border-radius: 6px; color: white; font-size: 1.2em; font-weight: bold; cursor: pointer; margin-top: 20px;
        }
        .email-update-button { background-color: #007bff; }
        .email-update-button:hover { background-color: #0056b3; }
        .password-update-button { background-color: #dc3545; }
        .password-update-button:hover { background-color: #c82333; }
        .error-message { color: #721c24; background-color: #f8d7da; border: 1px solid #f5c6cb; padding: 12px; margin-bottom: 20px; border-radius: 6px; font-weight: bold; }
        .success-message { color: #155724; background-color: #d4edda; border: 1px solid #c3e6cb; padding: 12px; margin-bottom: 20px; border-radius: 6px; font-weight: bold; }
        hr { border-top: 1px dashed #ccc; margin: 30px 0; }
    </style>
</head>
</head>
<body>
    <div class="auth-container">
        <h1>パスワード・メールアドレス変更</h1>
        
        <p th:if="${errorMessage}" class="error-message" th:text="${errorMessage}"></p>
        <p th:if="${successMessage}" class="success-message" th:text="${successMessage}"></p>

        <form th:action="@{/mypage/password/update/email}" method="post"> 
        
            <h2>メールアドレスの変更</h2>
            
            <div class="form-group">
                <label for="currentMailAddress">現在のメールアドレス:</label>
                <input type="email" id="currentMailAddress" th:value="${user.mailAddress}" disabled="disabled">
                <input type="hidden" name="currentMailAddress" th:value="${user.mailAddress}"> 
            </div>
            
            <div class="form-group">
                <label for="newMailAddress">新しいメールアドレス:</label>
                <input type="email" id="newMailAddress" name="newMailAddress">
            </div>

            <div class="form-group">
                <label for="currentPasswordForEmail">現在のパスワード (必須):</label>
                <input type="password" id="currentPasswordForEmail" name="currentPasswordForEmail" required>
            </div>
            
            <button type="submit" class="email-update-button">メールアドレスを変更</button>
        </form>

        <hr>

        <form th:action="@{/mypage/password/update/password}" method="post">
            
            <h2 class="password-section-title">パスワードの変更</h2>

            <input type="hidden" name="currentMailAddress" th:value="${user.mailAddress}">

            <div class="form-group">
                <label for="currentPassword">現在のパスワード (必須):</label>
                <input type="password" id="currentPassword" name="currentPassword" required>
            </div>

            <div class="form-group">
                <label for="newPassword">新しいパスワード:</label>
                <input type="password" id="newPassword" name="newPassword" required> 
            </div>

            <div class="form-group">
                <label for="confirmPassword">新しいパスワード (確認):</label>
                <input type="password" id="confirmPassword" name="confirmPassword" required>
            </div>
            
            <button type="submit" class="password-update-button">パスワードを変更</button>
        </form>
        
        <div style="text-align: center; margin-top: 30px;">
            <a th:href="@{/mypage}" style="color: #007bff; text-decoration: none; font-weight: bold;">プロフィール編集画面に戻る</a>
        </div>
    </div>
</body>
</html>