<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <title>ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ - Cheers Office</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/axios@1.7.7/dist/axios.min.js"></script>
    <link rel="stylesheet" href="/css/style.css">
	<link rel="icon" type="image/png" href="/images/cheers_office_logo.png">
    
    <style>
        /* â˜…â˜…â˜… ä¿®æ­£ç®‡æ‰€: body ã«ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã¨èƒŒæ™¯è‰²ã‚’è¨­å®š â˜…â˜…â˜… */
        body {
            /* ãƒšãƒ¼ã‚¸å…¨ä½“ã«ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¨­å®šã—ã€å›ºå®šãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆç´„120pxï¼‰ã®è£ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒéš ã‚Œã‚‹ã®ã‚’é˜²ã */
            padding-top: 120px; 
            margin: 0;
            background-color: #e6f0ff; /* home.html ã® body ã¨åŒã˜èƒŒæ™¯è‰²ã‚’è¨­å®š */
        }
        
        .page-content {
            /* bodyã®padding-topã§ä¸Šéƒ¨ã®ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¢ºä¿ã—ãŸãŸã‚ã€ã“ã®è¦ç´ ã®ä½™åˆ†ãª padding-top ã‚’å‰Šé™¤ */
            padding-top: 30px; 
            padding-bottom: 30px;
        }
        
        .user-icon-sm {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 10px;
        }
        .accordion-button {
            font-weight: bold;
        }
        .accordion-body ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .accordion-body li {
            padding: 5px 0;
            border-bottom: 1px dotted #eee;
            font-size: 0.95em;
        }
        .search-container {
            max-width: 800px;
            margin: 0 auto 30px;
			
        }
    </style>
</head>
<body>
    <div th:replace="common/header :: header"></div>

    <main class="container page-content">
		
        <h2 class="mb-4 text-center">ğŸ¢ ãƒ¡ãƒ³ãƒãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä¸€è¦§</h2>

        <div class="search-container">
            <div class="input-group mb-3">
                <input type="text" class="form-control" id="userSearchInput" placeholder="åå‰ã€ãƒ¡ãƒ¼ãƒ«ã€ã‚°ãƒ«ãƒ¼ãƒ—ãªã©ã§æ¤œç´¢...">
                <button class="btn btn-primary" type="button" id="searchButton">æ¤œç´¢</button>
            </div>
        </div>

        <div id="userListAccordion" class="accordion" style="max-width: 800px; margin: 0 auto;">
            <p class="text-center text-muted" id="loadingMessage">ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
        </div>
    </main>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.7.7/dist/axios.min.js"></script>
    
    <script th:inline="javascript">
        // CSRFãƒˆãƒ¼ã‚¯ãƒ³ã‚’axiosã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼ã«è¨­å®š
        const token = document.querySelector('meta[name="_csrf"]').getAttribute('content');
        const header = document.querySelector('meta[name="_csrf_header"]').getAttribute('content');
        axios.defaults.headers.common[header] = token;
        
        // â˜…â˜…â˜… ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã™ã‚‹å¤‰æ•°ã‚’å®šç¾©ï¼ˆã“ã‚ŒãŒ mypage_list.js ã§å‚ç…§ã•ã‚Œã‚‹ï¼‰ â˜…â˜…â˜…
        var initialAllUsersData = /*[[${allUsersJson}]]*/ []; 
    </script>
    
    <script th:src="@{/js/mypage_list.js}"></script>
</body>
</html>